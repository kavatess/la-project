<div class="d-flex align-items-center justify-content-between">
  <div>
    <span class="me-2"> {{ title }}</span>

    <span *ngIf="filterItem" class="badge rounded-pill bg-secondary">
      <div class="d-flex align-items-center">
        <i class="bi bi-filter"></i>
        <span class="ms-2 me-2">
          <ng-container [ngSwitch]="filterItem.type">
            <ng-container *ngSwitchCase="FilterTypes.String">
              '{{ filterItem.value }}' included
            </ng-container>

            <ng-container *ngSwitchCase="FilterTypes.Boolean">
              {{ (filterItem.value ? 'has ' : 'no ') + field }}
            </ng-container>

            <ng-container *ngSwitchCase="FilterTypes.Number">
              {{ getNumberFilterTxt(filterItem.value) }}
            </ng-container>

            <ng-container *ngSwitchCase="FilterTypes.DateTime">
              {{ getDateTimeFilterTxt(filterItem.value) }}
            </ng-container>

            <ng-container *ngSwitchCase="FilterTypes.Array">
              {{ getArrayFilterTxt(filterItem.value) }}
            </ng-container>
          </ng-container>
        </span>
        <i
          class="bi bi-x-lg text-white"
          style="cursor: pointer"
          (click)="removeBtnOnClick(); $event.preventDefault()"
        ></i>
      </div>
    </span>
  </div>

  <div *ngIf="!loading" class="btn-group">
    <span *ngIf="filter" ngbDropdown>
      <button ngbDropdownToggle class="btn p-1">
        <i class="bi bi-filter-circle-fill"></i>
      </button>

      <div *ngIf="input" ngbDropdownMenu style="min-width: 200px" class="p-2">
        <div class="input-group">
          <ng-container [ngSwitch]="filter.type">
            <ng-container *ngSwitchCase="FilterTypes.String">
              <input type="text" class="form-control" [formControl]="input" />
            </ng-container>

            <ng-container *ngSwitchCase="FilterTypes.Boolean">
              <mat-slide-toggle [formControl]="input">
                {{ title }}
              </mat-slide-toggle>
            </ng-container>

            <ng-container *ngSwitchCase="FilterTypes.Number">
              <form [formGroup]="input">
                <input
                  type="number"
                  class="form-control"
                  formControlName="from"
                />
                <input
                  type="number"
                  class="form-control"
                  formControlName="to"
                />
              </form>
            </ng-container>

            <ng-container *ngSwitchCase="FilterTypes.DateTime">
              <form [formGroup]="input">
                <input
                  type="datetime"
                  class="form-control"
                  formControlName="from"
                />
                <input
                  type="datetime"
                  class="form-control"
                  formControlName="to"
                />
              </form>
            </ng-container>

            <ng-container *ngSwitchCase="FilterTypes.Array">
              <app-multiple-select
                [options]="filter.options"
                [formControl]="input"
              ></app-multiple-select>
            </ng-container>
          </ng-container>

          <div class="input-group-append">
            <button
              class="btn btn-primary"
              (click)="applyBtnOnClick(); $event.preventDefault()"
              [disabled]="input.invalid"
            >
              Apply
            </button>
          </div>
        </div>
      </div>
    </span>

    <button class="btn p-1" (click)="sortBtnOnClick(); $event.preventDefault()">
      <ng-container [ngSwitch]="sortIndex">
        <i *ngSwitchCase="0" class="bi bi-sort-down"></i>
        <i *ngSwitchCase="1" class="bi bi-sort-alpha-down"></i>
        <i *ngSwitchCase="2" class="bi bi-sort-alpha-up"></i>
      </ng-container>
    </button>
  </div>
</div>
